<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>.

<style>
	.content{
		text-align : center;
		padding-bottom : 60px;
		
	}
	.content-wrap{
		width : 1200px;
		margin: 0 auto;
		text-align : right;
		overflow : hidden;
		
	}
	
	.page-title{
		text-align:center;
		font-size : 25px;
		font-family : mainB2;
		color : var(--bold);
		margin-top : 40px;
	}
	.match-table{
		width : 100%;
	
	}
	.match-table th{
		padding-right : 14px;
		
	}
	.match-table td{
		text-align : right;
		padding-right : 14px;
		margin-right : 14px;
		
	}
	.table-section{
		margin-top : 10px;
		padding-left : 15px;
	}
	.grade{
		text-align : right;
	}
	.list-wrap{
		margin-top : 40px;
		display : flex;
		justify-content : space-between;
		align-content : center;
		flex-wrap : wrap;
		
	}
	.table-section{
		width :45%;
	}
	.list-box{
		display:flex;
		width: 45%;
		margin-top : 30px;
		background-color : var(--color);
		border-radius : 5px;
		padding-bottom : 10px;
		justify-content : space-between;
		align-items : center;
		
		
	}
	.photo-box{
		width : 45%;
		text-align : center;
	
	}
	.photo-box>img{
		width : 100%;
		
	}
	.category-list{
		font-family : mainB2;
	}
	
	.inner{
		margin:0 auto;
		
	}
	#modal-close{
		cursor : pointer;
		padding-top: 10px;
		padding-right: 10px;
	}
	.tb{
		text-align : right;
	}
	#matchingList{
		border : none;
		justify-content:right;
		width : 15%;
		padding : 5px 0;
	}
</style>
</head>
<body>
<th:block th:include="common/header"></th:block>
<main class="content">
	<div class="content-wrap">
		<div class="page-title">매칭 관리</div>
		<button type="button" class="main-btn" id="matchingList">매칭 현황</button>
		<div class="list-wrap" >
			<div class="list-box" th:each="match : ${list}">
				<div class="photo-box">
					<img th:src="'/member/memberImg/'+${match.memberImgPath}" id="matchPhoto">
				</div>
				<div class="table-section">
					<div id="matchNo1" th:text="${match.matchNo}" style="display : none;"></div>
					<table class="match-table">
						<tr>
							<th>이름</th>
							<td th:text="${match.memberName}" th:value="${match.memberName}" id="memberName"></td>
						</tr>
						<tr>
							<th>성별</th>
							<td th:if="${match.memberGender == 'm'}" th:text="남" th:value="memberGender" id="memberGender"></td>
							<td th:if="${match.memberGender == 'f'}" th:text="여" th:value="memberGender" id="memberGender"></td>
						</tr>
						<tr>
							<td colspan="2" class="category-list">───희망 카테고리───</td>
						</tr>
						<tr>
							<th>지역</th>
							<td th:text="${match.matchField}" th:value="${match.matchField}" id="matchField"></td>
						</tr>
						
						<tr>
							<th>등급</th>
							<td th:text="${match.memberGrade}" th:value="${match.memberGrade}" id="memberGrade"></td>
						</tr>
						<tr>
							<th>직업</th>
							<td th:text="${match.matchJob}" th:value="${match.matchJob}" id="matchJob"></td>
						</tr>
						<tr>
							<th>MBTI</th>
							<td th:text="${match.matchMbti}" th:value="${match.matchMbti}" id="matchMbti"></td>
							
						</tr>
						<tr>
							<th>취미</th>
							<td th:text="${match.matchHobby}" th:value="${match.matchHobby}" id="matchHobby"></td>
						</tr>
						
						<tr>
							<th>나이</th>
							<td th:text="${match.matchAge}" th:value="${match.matchAge}" id="matchAge"></td>
						</tr>
						<tr th:if="${match.memberGrade == 'platinum'}" class="grade" >
							<th>연봉</th>
							<td th:text="${match.matchSalary}" th:value="${match.matchSalary}" id="matchSalary"></td>
						</tr>
						<tr>
							<th th:if="${match.memberGrade == 'gold' || match.memberGrade == 'platinum'}">학력</th>
							<td th:if="${match.memberGrade == 'gold' || match.memberGrade == 'platinum'}" th:value="${match.matchEdu}" th:text="${match.matchEdu}" id="matchEdu"></td>
						</tr>
						<tr th:if="${match.memberGrade == 'platinum'}" class="grade" >
							<th>근무형태</th>
							<td th:text="${match.matchWorkType}" th:value="${match.matchWorkType}" id="matchWorkType"></td>
						</tr>
						
					</table>
				</div>
			</div>
		</div>	
	</div>
	
</main>
<th:block th:include="common/footer"></th:block>
</body>
<script>

$(".list-box").on("click", function(){

	const memberName = $(this).find("#memberName").text();

	const matchField = $(this).find("#matchField").text();

	const memberGrade = $(this).find("#memberGrade").text();

	const matchJob = $(this).find("#matchJob").text();

	const matchMbti = $(this).find("#matchMbti").text();

	const matchHobby = $(this).find("#matchHobby").text();

	const memberGender = $(this).find("#memberGender").text();

	const matchAge = $(this).find("#matchAge").text();

	const matchSalary = $(this).find("#matchSalary").text();

	const matchEdu = $(this).find("#matchEdu").text();

	const matchWorkType = $(this).find("#matchWorkType").text();

	const memberImgPath = $(this).find("#matchPhoto").attr("src");
	
	const matchNo = $(this).find("#matchNo1").text();
	swal({
		title : "매칭 진행",
		text : "이 회원이 신청한 조건에 맞는 파트너를 검색하시겠습니까?",
		icon : "info",
		buttons : {
			cancel : {
				text : "취소",
				value : true,
				visible : true,
				className : "btn-cancel",
				closeModal : true
			},
			confirm : {
				text : "매칭",
				value : true,
				visible : true,
				className : "btn-confrim",
				closeModal : true
			}
		}
	}).then(function(isConfirm){
	const form = document.createElement("form");
	form.setAttribute("method", "get");
	form.setAttribute("action", "/match/findMatch");
	
	
	
	const input1 = document.createElement("input");
	input1.setAttribute("type", "hidden");
	input1.setAttribute("name", "memberName");
	input1.setAttribute("value", $(this).find("#memberName").text() );
	
	const input2 = document.createElement("input");
	input2.setAttribute("type", "hidden");
	input2.setAttribute("name", "matchField");
	input2.setAttribute("value", matchField );
	
	const input3 = document.createElement("input");
	input3.setAttribute("type", "hidden");
	input3.setAttribute("name", "memberGrade");
	input3.setAttribute("value", memberGrade );
	form.appendChild(input1);
	form.appendChild(input2);
	form.appendChild(input3);
	
	const input4 = document.createElement("input");
	input4.setAttribute("type", "hidden");
	input4.setAttribute("name", "matchJob");
	input4.setAttribute("value", matchJob);
	
	
	const input5 = document.createElement("input");
	input5.setAttribute("type", "hidden");
	input5.setAttribute("name", "matchMbti");
	input5.setAttribute("value", matchMbti );
	
	const input6 = document.createElement("input");
	input6.setAttribute("type", "hidden");
	input6.setAttribute("name", "matchHobby");
	input6.setAttribute("value", matchHobby );
	
	const input7 = document.createElement("input");
	input7.setAttribute("type", "hidden");
	input7.setAttribute("name", "memberGender");
	input7.setAttribute("value", memberGender );
	
	form.appendChild(input4);
	form.appendChild(input5);
	form.appendChild(input6);
	form.appendChild(input7);
	const input8 = document.createElement("input");
	input8.setAttribute("type", "hidden");
	input8.setAttribute("name", "matchAge");
	input8.setAttribute("value", matchAge);
	
	
	const input9 = document.createElement("input");
	input9.setAttribute("type", "hidden");
	input9.setAttribute("name", "matchSalary");
	input9.setAttribute("value", matchSalary );
	
	const input10 = document.createElement("input");
	input10.setAttribute("type", "hidden");
	input10.setAttribute("name", "matchEdu");
	input10.setAttribute("value", matchEdu );
	
	const input11 = document.createElement("input");
	input11.setAttribute("type", "hidden");
	input11.setAttribute("name", "matchWorkType");
	input11.setAttribute("value", matchWorkType );
	
	const input12 = document.createElement("input");
	input12.setAttribute("type", "hidden");
	input12.setAttribute("name", "matchNo");
	input12.setAttribute("value", matchNo );
	
	
	form.appendChild(input8);
	form.appendChild(input9);
	form.appendChild(input10);
	form.appendChild(input11);
	form.appendChild(input12);
	
	document.body.appendChild(form);
	form.submit();
	})
});

$("#matchingList").on("click", function(){
	window.location.href = "/match/matchingList";
});
</script>
</html>