<!DOCTYPE html>
<html xmlns:th="http://www.thyeleap.org">
<head>
<meta charset="UTF-8">
<title>Update Page</title>
<link rel="stylesheet" href="../css/memberUpdateFrm.css">
</head>
<body>
	<th:block th:include="common/header"></th:block>
		<div class="updateMember-all-wrap">
        <div class="updateMember-wrap">
            <div class="updateMember-header">
                <h1>정보수정</h1>
            </div>
            <div class="creat-manager-content">
                <form action="/member/memberUpdate" method="post">
                    <div class="update-input-content">
                        <span>비밀번호<sup>*</sup> : </span>
                        <input type="password" name="memberPw" id="memberPw">
                        <p class="up-pwRule">알파벳 8글자 이상 20글자 이하, 특수문자 포함(!,@,#,$,%)</p>
                    </div>
                    <div class="update-input-content">
                        <span>비밀번호 확인<sup>*</sup> : </span>
                        <input type="password" name="memberPwRe" id="memberPwRe">
                        <p class="up-pw-input-msg"></p>
                    </div>
                    <div class="update-input-content">
                        <span>전화번호<sup>*</sup> : </span>
                        <input type="text" name="memberPhone" id="memberPhone" placeholder="ex) 010-0000-0000">
                        <P class="phone-msg"></P>
                    </div>
                    <div class="update-input-content">
                        <span>주소<sup>*</sup> : </span>
                        <input type="text" name="memberAddr" id="memberAddr" readonly>
                        <button type="button" id="search-addr">주소찾기</button>
                    </div>
                    <div class="update-input-content">
                    <span>직업<sup>*</sup> : </span>
                    <select title="직업" name="memberJob" id="memberJob">
                    	<option value="">직업을 선택하세요</option>
                        <option value="금융, 사무직">금융, 사무직</option>
                        <option value="연구원, 엔지니어">연구원, 엔지니어</option>
                        <option value="건축, 설계사">건축,설계사</option>
                        <option value="간호, 의료 관련">간호, 의료관련</option>
                        <option value="디자이너">디자이너</option>
                        <option value="언론인">언론인</option>
                        <option value="교사, 강사">교사, 강사</option>
                        <option value="공무원, 공공기관 관련">공무원, 공공기관 관련</option>
                        <option value="의사, 약사">의사, 약사</option>
                        <option value="회계사 등 기타 전문직">회계사 등 기타 전문직</option>
                        <option value="변호사, 법조인"> 변호사, 법조인</option>
                        <option value="자영업, 사업자">자영업, 사업자</option>
                        <option value="프리랜서">프리랜서</option>
                        <option value="승무원, 항공관련">승무원, 항공관련</option>
                        <option value="대학 교수">대학교수</option>
                        <option value="서비스, 영업직">서비스, 영업직</option>
                        <option value="학생, 대학원생">학생, 대학원생</option>
                        <option value="기타">기타</option>
                    </select>
                </div>
                <div class="update-input-content">
                    <span>MBTI<sup>*</sup> : </span>
                    <select title="MBTI" name="memberMBTI" id="memberMBTI">
                    	<option value="">MBTI 선택</option>
                        <option value="ISTP">ISTP</option>
                        <option value="ISFJ">ISFJ</option>
                        <option value="INFJ">INFJ</option>
                        <option value="INTJ">INTJ</option>
                        <option value="ISTP">ISTP</option>
                        <option value="ISFP">ISFP</option>
                        <option value="INFP">INFP</option>
                        <option value="INTP">INTP</option>
                        <option value="ESTP">ESTP</option>
                        <option value="ESFP">ESFP</option>
                        <option value="ENFP">ENFP</option>
                        <option value="ENTP">ENTP</option>
                        <option value="ESTJ">ESTJ</option>
                        <option value="ESFJ">ESFJ</option>
                        <option value="ENFJ">ENFJ</option>
                        <option value="ENTJ">ENTJ</option>
                    </select>
                </div>
                    <div class="updateMember-btn">
                        <button type="button" id="member-update-cancel">취소</button>
                        <button type="submit" id="member-update">수정</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script>
    $("#search-addr").on("click", function(){
		new daum.Postcode({
	        oncomplete: function(data) {
	        	
	            const roadAddress = data.roadAddress;
	            const zonecode = data.zonecode;
	            //console.log($("#memberAddr").val(data.roadAddress));
	            //console.log(roadAddress);
	            //console.log(zonecode);
	           $("#memberAddr").attr("value", roadAddress);
	        }
	    }).open();
	});
    
    let pwCheck = false;
	$("#memberPw").on("keyup", function(){
	    
	    const pwRange = /^.{8,20}$/;
	    const pwRangeA = /[A-Z]/;
	    const pwRangea = /[a-z]/;
	    const pwRangeNum = /[0-9]/;
	    const pwRangeO = /[!@#$%]/;
	    const inputPw = $("#memberPw").val();
	    const result1 = pwRange.test(inputPw);
	    const result2 = pwRangeA.test(inputPw);
	    const result3 = pwRangea.test(inputPw);
	    const result4 = pwRangeNum.test(inputPw);
	    const result5 = pwRangeO.test(inputPw);

	    if(result1&&result2&&result3&&result4&&result5){
	        $(".up-pwRule").text("사용가능한 비밀번호입니다.");
	        $(".up-pwRule").css("color","#25bd53");
	        pwCheck = true;
	    }else{
	        $(".up-pwRule").text("사용 불가능한 비밀번호입니다.");
	        $(".up-pwRule").css("color","var(--warning)");
	        pwCheck = false;
	    }
	});
    
	let pwReCheck = false;
    $("#memberPwRe").on("keyup", function(){
		const inputPw = $("#memberPw").val();
		const inputPwRe = $("#memberPwRe").val();
		if(inputPw === inputPwRe){
			$(".up-pw-input-msg").text("비밀번호가 같습니다.");
			$(".up-pw-input-msg").css("color", "#25bd53");
			pwReCheck = true;
		}else{
			$(".up-pw-input-msg").text("비밀번호를 확인해주세요.");
			$(".up-pw-input-msg").css("color", "var(--warning)");
			pwReCheck =false;
		}
	});
    
    let phoneCheck = false;
	$("#memberPhone").on("change", function(){
		const phCheck = /^010-\d{4}-\d{4}$/;
		const phoneValue = $("#memberPhone").val();
		const result = phCheck.test(phoneValue);
		if(result){
			phoneCheck = true;
			$(".phone-msg").empty();
		}else{
			$(".phone-msg").text("-를 포함하여 다시 입력해주세요");
			$(".phone-msg").css("color", "var(--warning)");
			phoneCheck = false;
		}
	});
	
	$("#member-update").on("click", function(e){
		
		const addr = $("#memberAddr").val();
		const job = $("#memberJob").val();
		const MBTI = $("#memberMBTI").val();
		
		if(!pwCheck||!pwReCheck||!phoneCheck||addr==""||job==""||MBTI==""){
			alert("필수 항목을 확인해주세요");
			e.preventDefault();
		}
	});
    
    $("#member-update-cancel").on("click", function(){
    	location.href=("/member/mypage");
    });
    </script>
	<th:block th:include="common/footer"></th:block>
</body>
</html>