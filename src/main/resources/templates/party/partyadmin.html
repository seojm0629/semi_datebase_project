<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
<meta charset="UTF-8">
<title>íŒŒí‹° ê´€ë¦¬</title>
<style>
* {
	margin: 0;
	padding: 0;
	box-sizing: border-box;
	color: #2B2B2B;
}

body {
	background: #fff;
	margin: 0 auto;
}

/* ì œëª© */
.page-title {
	text-align: center;
	font-size: 28px;
	font-weight: bold;
	margin: 40px 0 30px;
	color: #A66E33;
}

/* íƒ­ */
.tab {
	display: flex;
	justify-content: center;
	gap: 300px;
	margin-bottom: 20px;
	font-size: 18px;
	font-weight: 600;
}

.tab-btn {
	font-size: 20px;
	font-weight: bold;
	border-bottom: 2px solid #b58b39;
	color: #b58b39;
	padding-bottom: 5px;
	cursor: pointer;
}

.tab-btn.active {
	color: #A66E33;
	border-bottom: 3px solid #A66E33;
}

/* íŒŒí‹° í…Œì´ë¸” */
.party-box {
	border: 2px solid #ddd;
	padding: 20px;
	margin-bottom: 20px;
	width: 1200px;
	margin: 0 auto;
}

table {
	width: 100%;
	border-collapse: collapse;
	text-align: center;
	font-size: 16px;
}

th, td {
	border: 1px solid #ccc;
	padding: 12px;
}

th {
	background: #f7f7f7;
}

td {
	background: #fff;
}

/* ë²„íŠ¼ */
.btn-write {
	display: block;
	width: 200px;
	margin: 30px auto 50px;
	padding: 12px;
	text-align: center;
	background: #e3e3e3;
	border: none;
	cursor: pointer;
	font-size: 16px;
	font-weight: bold;
}

.btn-write:hover {
	background: #d3d3d3;
}
</style>

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

</head>
<body>

	<!-- í—¤ë” include -->
	<th:block th:include="common/header"></th:block>

	<h1 class="page-title">íŒŒí‹° ê´€ë¦¬</h1>

	<!-- íƒ­ -->
	<div class="tab">
		<span class="tab-btn active" data-type="ì™€ì¸">ì™€ì¸ íŒŒí‹° ğŸ·</span> <span
			class="tab-btn" data-type="ë¹„ì–´">ë¹„ì–´ íŒŒí‹° ğŸº</span>
	</div>

	<!-- íŒŒí‹° ë¦¬ìŠ¤íŠ¸ -->
	<div class="party-box">
		<table>
			<thead>
				<tr>
					<th>íŒŒí‹° ì¼ì</th>
					<th>íŒŒí‹° ì¥ì†Œ</th>
					<th>ì¸ì› í˜„í™©</th>
				</tr>
			</thead>
			<tbody id="party-table-body">
				<!-- AJAXë¡œ ë¶ˆëŸ¬ì˜¨ ë°ì´í„°ê°€ ë“¤ì–´ì˜´ -->
			</tbody>
		</table>
	</div>

	<button class="btn-write">íŒŒí‹° ê²Œì‹œê¸€ ì‘ì„±</button>

	<!-- footer include -->
	<th:block th:include="common/footer"></th:block>

	<script>
$(document).ready(function(){

    function loadParty(type){
    	$.ajax({
    	    url: '/party/admin/list',
    	    type: 'GET',
    	    data: { type: 'ë¹„ì–´' },
    	    success: function(list){
    	        let tbody = $("#party-table-body");
    	        tbody.empty();
    	        
    	        if(list.length === 0){
    	            tbody.append('<tr><td colspan="3">ë“±ë¡ëœ íŒŒí‹°ê°€ ì—†ìŠµë‹ˆë‹¤.</td></tr>');
    	        } else {
    	            list.forEach(function(p){
    	                tbody.append(
    	                    `<tr>
    	                        <td>${p.partyDate}</td>
    	                        <td>${p.partyPlace}</td>
    	                        <td>ë‚¨ ${p.partyMale}ëª… / ì—¬ ${p.partyFemale}ëª…</td>
    	                    </tr>`
    	                );
    	            });
    	        }
    	    },
    	    error: function(xhr, status, error){
    	        console.error("AJAX Error:", xhr.status, error);
    	        $("#party-table-body").html('<tr><td colspan="3">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</td></tr>');
    	    }
    	});

    }

   
    loadParty('ì™€ì¸');

  
    $(".tab-btn").click(function(){
        $(".tab-btn").removeClass("active"); 
        $(this).addClass("active");          
        let type = $(this).data("type");
        loadParty(type);
    });
});


</script>

</body>
</html>
