<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
<meta charset="UTF-8">
<title>파티 상세</title>
<link rel="stylesheet" href="/css/party.css">
<style>
.container {
	width: 1000px;
	margin: 20px auto;
}

.party-header {
	font-size: 18px;
	font-weight: bold;
	margin-bottom: 15px;
	text-align: center;
}

.party-main {
	display: flex;
	gap: 20px;
	align-items: flex-start;
}

.party-img {
	width: 40%;
	min-width: 300px;
	height: 500px;
	display: flex;
	justify-content: center;
	align-items: center;
	overflow: hidden;
}

.party-img img {
	max-height: 100%;
	width: auto;
	height: auto;
	object-fit: cover;
	display: block;
}

.info-box {
	width: 55%;
	display: flex;
	flex-direction: column;
	justify-content: flex-start;
}

.title-box {
	border: 1px solid #ddd;
	padding: 15px;
	margin-bottom: 10px;
	background-color: #fff;
	margin-top: 30px;
}

.content-box {
	border: 1px solid #ddd;
	padding: 15px;
	margin-bottom: 10px;
	background-color: #fff;
	flex-grow: 1;
	min-height: 320px;
	overflow-y: auto;
}

.details-box {
	font-weight: bold;
}

.payment-btn {
	margin-top: 15px;
	padding: 12px 25px;
	background-color: #E5BA73;
	border: none;
	border-radius: 5px;
	color: white;
	cursor: pointer;
	font-size: 16px;
	transition: background-color 0.3s;
}

.payment-btn:hover {
	background-color: #C58940;
}

@media screen and (max-width: 1100px) {
	.party-main {
		flex-direction: column;
		align-items: center;
	}
	.party-img, .info-box {
		width: 90%;
	}
}
</style>
</head>
<body>
	<th:block th:include="common/header"></th:block>
	<main>
		<div class="container">
			<div class="party-header">
				<span th:text="${party.partyType}">와인파티 / 비어파티</span>
			</div>
			<div class="party-main">
				<div class="party-img">
					<img th:src="@{/partyImg/{thumb}(thumb=${party.partyThumb})}"
						th:alt="${party.partyTitle}">
				</div>
				<div class="info-box">
					<div class="title-box">
						<div class="details-box">
							<div>
								<strong>제목 :</strong> <span id="partyTitle"
									th:text="${party.partyTitle}">파티 제목</span>
							</div>
							<div>
								<strong>날짜 :</strong> <span th:text="${party.partyDate}">날짜</span>
							</div>
							<div>
								<strong>가격 :</strong> <span id="partyPrice"
									th:text="${party.partyPrice}">가격</span>
							</div>
							<div>
								<strong>주소 :</strong> <span th:text="${party.partyPlace}">주소</span>
							</div>
							<div>
								<strong>인원 :</strong> 남 <span th:text="${maleCount}">0</span>명 /
								여 <span th:text="${femaleCount}">0</span>명
							</div>

						</div>
					</div>
					<div class="content-box" th:text="${party.partyContent}">파티
						내용</div>
					<button class="payment-btn">결제하기</button>
				</div>
			</div>
		</div>
	</main>
	<script src="https://cdn.iamport.kr/v1/iamport.js"></script>
	<script>
		const totalPrice = Number(document.querySelector('#partyPrice').innerText);
		const partyTitle = document.querySelector('#partyTitle').innerText;

		document
				.querySelector('.payment-btn')
				.addEventListener(
						'click',
						function() {
							IMP.init("imp58065218");
							IMP
									.request_pay(
											{
												channelKey : "channel-key-b62d8413-93ed-4f94-b7ff-a102e4030953",
												pay_method : "card",
												merchant_uid : "order_no_0001",
												name : partyTitle,
												amount : totalPrice,
												buyer_email : "test@portone.io",
												buyer_name : "구매자이름",
												buyer_tel : "010-1234-5678",
												buyer_addr : "서울특별시 강남구 삼성동",
												buyer_postcode : "123-456"
											}, function(rsp) {
												console.log(rsp);
											});
						});
	</script>

	<th:block th:include="common/footer"></th:block>
</body>
</html>
