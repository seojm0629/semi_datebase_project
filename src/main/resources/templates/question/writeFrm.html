<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<style>
@font-face {
    font-family: main2;
    src: url(../CSS/font/PyeongChang-Regular.ttf);
}
@font-face {
    font-family: mainB2;
    src: url(../CSS/font/PyeongChang-Bold.ttf);
}
:root{
    --color1 : #2B2B2B;/*검은 글씨색*/
    --color2 : #FAF8F1;/*푸터 배경색*/
    --color3 : #FAEAB1;/**/
    --color4 : #E5BA73;/*버튼색, 로고, 페이지 제목*/
    --color5 : #C58940;/*푸터 두꺼운 글씨, 선 그을때*/
    --color6 : #EAC88F;/*버튼 호버한 경우 색*/
    --color7 : #FF6868;/*경고색*/
    --color8 : #D9D9D9;/*취소버튼*/
}

*{
    margin: 0px;
    padding: 0px;
    color: #2B2B2B;
    font-family: mainB2;
}

.content-header{
    width: 400px;
    margin: 55px auto;
    text-align: center;
    
    
}

.content-header>h1{
    color: var(--color4);
}

.content-question{
	width:900px;
	height: 50px;
	line-height: 50px;
	margin: 0 auto;
	text-align: center;
	font-family: mainB2;
	font-weight: 900;
	font-size: 22px;
	background-color: #E5BA73;
	color: #ffffff;
}

.content-writer{
	width: 900px;
	margin: 0 auto;
	border: 1px solid #ccc;	
	box-sizing: border-box;
}

.content-writer>tbody>tr:first-child{
	height: 50px;
	line-height: 50px;
	display:flex;
}
.content-writer>tbody>tr:first-child>td{
	padding-left: 20px;
}


.content-writer>tbody>tr:nth-child(2){
	height: 50px;
	line-height: 50px;
	display:flex;
	border-top: 1px solid #ccc;
	border-bottom: 1px solid #ccc;
}

.content-writer>tbody>tr:nth-child(2)>th{
	width: 150px;
	background-color: #FAF8F1;

}

.content-writer>tbody>tr:nth-child(2)>td>input{
	width:300px;
}
.content-writer>tbody>tr:nth-child(2)>td:last-child{
	padding-left: 20px;
}

.content-writer>tbody>tr:first-child>th{
	width: 150px;
	background-color: #FAF8F1;
}
.content-writer>tbody>tr:first-child>td>input{
	width: 725px;
	height: 30px;
	border: none;
	
}


.content{
    
    border-top: none;
    width: 878px;
    height: 500px;
    margin: 0 auto;
    padding-left: 20px;
    padding-top: 20px;
}
#content{
    width: 855px;
    height: 450px;
}

.content-btn-box{
    width: 900px;
    margin: 0 auto;
    text-align: center;
    height: 90px;
    line-height: 90px;
    
    border-top: none;
    box-sizing: border-box;
}

.content-btn-box>button{
    width: 300px;
    height: 40px;
    border: none;
    border-radius: 15px;
    background-color: var(--color4);
    font-family: mainB2;
    font-size: 22px;
}
.content-writer>tbody>tr:nth-child(2)>td{
	text-align: center;
}
</style>
</head>
<body>
	<th:block th:include="common/header"></th:block>
	<main>
		<div class="content-wrap">
            <div class="content-header">
                <h1>문의사항 작성</h1>
            </div>
           	
           	<div class="content-question">소개팅 문의</div>
	        <form action="/question/write" method = "post" enctype = "multipart/form-data">    
	            <table class="content-writer">
	                <tr>
	                    <th>제목</th>
	                    <td colspan="3">
	                    	<input type="text" name="questionTitle" id="title">
	                    </td>
	                </tr>
	                <tr>
	                	<th>작성자</th>
	                	<td style="width:30%;">
	                		<span th:text="${session.member.memberId}"></span>
	                		<input type="hidden" name="questionWriter" th:value="${session.member.memberId}">
	                	</td>
	                	<th>첨부파일</th>
	                	<td>
	                		<input type="file" name="upfile" multiple>
	                	</td>
	                </tr>
					<tr>
			            <td class="content">
			            	<div class="input-content">
			                	<textarea name="questionContent" id="content"></textarea>
			                </div>
			            </td>
					</tr>
					<tr>
			            <td class="content-btn-box">
			                <button type="submit" class="btn-primary lg">공지사항 등록</button>
			            </td>
			        </tr>    
	            </table>
			</form>
        </div>
	</main>
	<script src="/summernote/summernote-lite.js"></script>
	<script src="/summernote/lang/summernote-ko-KR.js"></script>
	<link rel="stylesheet" href="/summernote/summernote-lite.css">
	
	<script>
		$("[name=questionContent]").summernote({
			height: 500,
			lang: "ko-KR",
			callbacks: {
				//사용자가 이미지를 올리면 동작할 함수를 지정
				onImageUpload : function(file){
					//사용자가 선택한 해당 파일 객체를 매개변수로 받음
					//이미지를 처리할 함수를 실행 -> 서버에 ajax로 업로드하고 이미지 경로를 받아오는 작업
					uploadImage(file[0],this);
				}
				
			}
		});
		
		function uploadImage(file, editor){
			//ajax로 서버에 이미지를 업로드
			//업로드 된 파일의 filepath를 받아옴
			//받아온 filepath로 img태그의 src속성에 설정
			
			//ajax 파일 업로드
			const form = new FormData();
			form.append("upfile", file);
			
			$.ajax({
				url: "/question/editorImage",
				type: "post",
				data: form,
				processData: false,
				contentType: false,
				
				success: function(result){
					$(editor).summernote("insertImage", "/question/editor"+result);
				}
			});
			//processData : ajax함수는 데이터 전송 시 기본적으로 문자열 전송 세팅 -> 그 기본세팅을 비활성화 
			//contentType : enctype="application/x-www-formurlencoded;charset=utf-8" 기본값 비활성화
		}
	
	</script>
	<th:block th:include="common/footer"></th:block>
</body>
</html>

















































